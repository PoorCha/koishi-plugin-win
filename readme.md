# koishi-plugin-win

[![npm](https://img.shields.io/npm/v/koishi-plugin-win?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-win)

- 我们又赢了！
- win指令
  - 使用名为“zvv”的数据表记录每天用户赢的结果，并限制每日只能赢一次
  - 其概率分别为：灵活赢 - 2%，小赢 - 48%，中赢 - 25%、大赢 - 17%、特大赢 - 5%、赢麻了 - 2%、[数据删除] - 1%
  - “共同富win”功能：win程度为1~2%时的结果为“灵活赢”，抽到“灵活赢”的用户当天可以再抽一次，赢的程度与当前最赢者（必须大赢及以上，否则失败）平分
  - “精准扶win”功能：若某用户连续3天抽到“小赢”，则其赢级会在第4天提高40%，最高为100%
  - “风口飞win”功能：每日从9-21点钟内随机抽取一小时，作为当日的“风口”，在该风口时间内首位win的用户将获得40%的加成，每群仅限一次（该功能优先于“精准扶win”，如果飞win后仍是小赢，则累积到后一天触发）
- win.window指令（别名：查看风口）
  - 用于在日志中查看当日风口
  - 风口在每日0时更新，若错过而没有生成风口，那么执行该指令会生成一个新的风口
  - 若风口已存在，则将其数值以及有用户触发“飞win”功能的群组均输出至日志中供查看
- rank指令
  - 用于获取当前群的赢程度排行
  - 可选参数d或detail，可用于查看当前群win情况的统计数据
  - 被“共同富win”功能“帮扶”过的用户与当前榜一，在排行榜中会被标注为“共赢”
- ask指令（别名：评价）
  - 后跟参数，可以让张教授做出评价
  - 该功能的实现使用在线语录库，在插件配置页面提供两个链接，供用户使用
  - 同时提供让用户使用本地自定义语录库的功能，只需简单的配置即可
- ask.update指令（别名：更新语录库）
  - 语录库的自动更新功能取消，用这个指令来手动更新语录库，建议一周一次
  - 需要3级权限

<br><br>
用户自定义语录库应当是utf8编码，否则输出会乱码。